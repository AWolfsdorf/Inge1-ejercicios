

----QUIT----(9 March 2021 14:58:42) CuisUniversity-4532.image priorSource: 13044060!

----STARTUP---- (9 March 2021 14:58:43) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4532.image!


----QUIT----(9 March 2021 14:58:43) CuisUniversity-4532.image priorSource: 16885479!

----STARTUP---- (7 July 2021 00:04:16) as /home/nikita/r/f/isw1/Inge1-ejercicios/20-TusLibros-Iteracion-4/CuisUniversity-4532.image!


----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Morphic/Morphic-Widgets-Extras.pck.st----!

CodePackage subclass: #ColorExtrasPackage
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Color-Extras'!

!classDefinition: #ColorExtrasPackage category: 'Color-Extras' stamp: 'Install-Color-Extras 7/7/2021 00:09:15'!
CodePackage subclass: #ColorExtrasPackage
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Color-Extras'!

ColorExtrasPackage class
	instanceVariableNames: ''!

!classDefinition: 'ColorExtrasPackage class' category: 'Color-Extras' stamp: 'Install-Color-Extras 7/7/2021 00:09:15'!
ColorExtrasPackage class
	instanceVariableNames: ''!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Features/Color-Extras.pck.st----!

CodePackage subclass: #MorphicMisc1Package
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Morphic-Misc1'!

!classDefinition: #MorphicMisc1Package category: 'Morphic-Misc1' stamp: 'Install-Morphic-Misc1 7/7/2021 00:09:30'!
CodePackage subclass: #MorphicMisc1Package
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Morphic-Misc1'!
!MorphicMisc1Package commentStamp: '<historical>' prior: 0!
My purpose in life is to check that any base image methods overridden have not been updated.
See #MorphMisc1Package class>>prePackageInstall!

MorphicMisc1Package class
	instanceVariableNames: ''!

!classDefinition: 'MorphicMisc1Package class' category: 'Morphic-Misc1' stamp: 'Install-Morphic-Misc1 7/7/2021 00:09:30'!
MorphicMisc1Package class
	instanceVariableNames: ''!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Morphic/Morphic-Misc1/Morphic-Misc1.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/2021-1c/20-TusLibros/Iteracion 4/StringsServicesServer.st----!

!classRemoval: #StringsServicesRestInterface stamp: 'nz 7/7/2021 00:11:54'!
Object subclass: #StringsServicesRestInterface
	instanceVariableNames: 'webServer port stringGenius'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'StringsServicesServer'!

!classRemoval: #StringGenius stamp: 'nz 7/7/2021 00:11:54'!
Object subclass: #StringGenius
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'StringsServicesServer'!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/System/Network-Kernel.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/System/Collections-CompactArrays.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Features/Compression.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Features/Sound.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Features/Identities-UUID.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/cuis2/Packages/Features/Cryptography-DigitalSignatures.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/2021-1c/20-TusLibros/Iteracion 4/WebClient.pck.st----!

----End fileIn of /home/nikita/r/f/isw1/2021-1c/20-TusLibros/Iteracion 4/StringsServicesServer.st----!

----End fileIn of /home/nikita/r/f/isw1/2021-1c/20-TusLibros/Iteracion 4/WordsClientDemo.st----!

WordsClientWindow open!


server := StringsServicesRestInterface listeningOn: 8080.!

WordsClientWindow open!


server destroy.!

----End fileIn of /home/nikita/r/f/isw1/Inge1-ejercicios/20-TusLibros-Iteracion-4/Tus-Libros.st----!

----End fileIn of /home/nikita/r/f/isw1/Inge1-ejercicios/20-TusLibros-Iteracion-4/Tus-Libros-Web-Client.st----!

!testRun: #CheckOutTest #test01CheckoutEmptyCartShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test02CheckoutACartWithOneItem stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test03CheckoutACartWithMultipleItems stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test04CheckoutItemWithoutPricesShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test05CheckoutWithExpiredCardShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test06CheckoutWithCardExpiredThisMonthShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test07CheckoutWithStolenCardShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test08CheckoutWithFakeCardShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test09CheckoutWithInsufficientFundsShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test10CheckoutWithInvalidCardNumberShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test11CheckoutWithEmptyCardOwnerNameShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #CheckOutTest #test12CheckoutWithBlankCardOwnerNameShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #PriceListTest #test01AddItemWithNegativePriceShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #PriceListTest #test02AddItemWithZeroPriceShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test01InvalidClientShallNotPass stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test02NewCartsAreEmpty stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test03ListCartWithOneItem stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test04ListInvalidCartShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test05AddItemToCartDoesntModifyOtherCarts stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test06CheckoutInvalidCartIdShouldRaiseError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test07CheckoutUsesTheCashier stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test08ListPurchasesOnOnlyOneBuyClient stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test09ListPurchasesOfManyItemsByOneClient stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test10CheckoutWithInvalidCreditCardShouldFail stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test11ListMultiplePurchasesOfTheSameClient stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test12ListPurchasesOfIncorrectPasswordShouldFail stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test13ListPurchasesOfDifferentClients stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test14CheckingOutAnExpiredCardShouldFail stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test15CheckingOutInADifferentPointInTimeShouldWorkAsIntended stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShopTest #test16AddingItemsToAnExpiredCartShouldFail stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test01EmptyCartHasNoItems stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test02AddingAnItemToACart stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test03AddingMultipleItemsToACart stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test04AddingANegativeQuantityRaisesError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test05AddingZeroQuantityRaisesError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

!testRun: #ShoppingCartTest #test06AddingNonIntegerQuantityRaisesError stamp: 'nz 7/7/2021 00:19:05'!
PASSED!

----SNAPSHOT----(7 July 2021 00:19:16) CuisUniversity-4532.image priorSource: 16885703!

MessageDialogWindow message: 'Probando alerta!!'.!


server destroy.!


shop _ TestStubs demoShop.!


shop _ TestStubs new demoShop.!
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:24:33'!
demoShop
	self shouldBeImplemented.! !
!TestStubs methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:26:25' prior: 50908164!
demoShop
	^ Shop
		withUserAuthenticator: (self mockUserAuthenticatorAlwaysReturning: true)
		prices: self priceList
		merchantProcessor: self mockAlwaysOkMerchantProcessor 
		timeProvider: self timeProvider.! !


shop _ TestStubs new demoShop.!
!TusLibrosRestInterface class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 00:27:37'!
on: aPort shop: aShop

	^self new initializeOn: aPort shopConfiguration: aShop! !

!methodRemoval: TusLibrosRestInterface class #on:shopConfiguration: stamp: 'nz 7/7/2021 00:27:47'!
on: aPort shopConfiguration: aShopConfiguration 

	^self new initializeOn: aPort shopConfiguration: aShopConfiguration!
!TusLibrosRestInterface methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:27:58'!
initializeOn: aPort shop: aShopConfiguration 

	shop := self createShopFrom: aShopConfiguration.
	port := aPort.
	webServer := WebServer new listenOn: self port.
	
	self configRoutes.! !
!TusLibrosRestInterface class methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:27:58' prior: 50908180!
on: aPort shop: aShop

	^self new initializeOn: aPort shop: aShop! !

!methodRemoval: TusLibrosRestInterface #initializeOn:shopConfiguration: stamp: 'nz 7/7/2021 00:27:58'!
initializeOn: aPort shopConfiguration: aShopConfiguration 

	shop := self createShopFrom: aShopConfiguration.
	port := aPort.
	webServer := WebServer new listenOn: self port.
	
	self configRoutes.!
!TusLibrosRestInterface methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:28:19' prior: 50908193!
initializeOn: aPort shop: aShop

	shop := aShop.
	port := aPort.
	webServer := WebServer new listenOn: self port.
	
	self configRoutes.! !

!methodRemoval: TusLibrosRestInterface #createShopFrom: stamp: 'nz 7/7/2021 00:28:34'!
createShopFrom: aShopConfiguration 
	^aShopConfiguration createShop.!


TusLibrosRestInterface allInstancesDo: [ :server | server destroy ].
server _ TusLibrosRestInterface on: 8080 shop: shop.!

CreateCartWindow new.!

----SNAPSHOT----(7 July 2021 00:30:57) CuisUniversity-4532.image priorSource: 18448188!

Panel subclass: #CreateCartWindow
	instanceVariableNames: 'userNameTextBox passwordTextBox createCartButton'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CreateCartWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 00:31:59'!
Panel subclass: #CreateCartWindow
	instanceVariableNames: 'userNameTextBox passwordTextBox createCartButton'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

Panel subclass: #MessageDialogWindow
	instanceVariableNames: 'contentLayout'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #MessageDialogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 00:32:07'!
Panel subclass: #MessageDialogWindow
	instanceVariableNames: 'contentLayout'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

Panel subclass: #MessageDialogWindow
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #MessageDialogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 00:32:10'!
Panel subclass: #MessageDialogWindow
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!


CreateCartWindow new.
!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:33:57' prior: 50907839 overrides: 50865470!
initialize

	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !


CreateCartWindow new.!


CreateCartWindow new.!

self open!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:37:48' prior: 50908281 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !


CreateCartWindow new.!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:39:00' prior: 50908299 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	self morphExtent: (self defaultExtent).
	self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !


CreateCartWindow new.!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:39:55' overrides: 50865461!
defaultExtent
	^800@300! !


CreateCartWindow new.!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:40:45' prior: 50908336 overrides: 50865461!
defaultExtent
	^1058@292! !


CreateCartWindow new.!


CreateCartWindow new.!
!MessageDialogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:41:55' prior: 50907877 overrides: 50865461!
defaultExtent
	^430@136! !
!MessageDialogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:42:12'!
defaultExtend
	^430@136! !

!methodRemoval: MessageDialogWindow #defaultExtend stamp: 'nz 7/7/2021 00:42:36'!
defaultExtend
	^430@136!


CreateCartWindow new.!
!MessageDialogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 00:43:14'!
alerta: aMessageText 
	
	self morphExtent: self defaultExtent.
	
	self addMorph: (
		LayoutMorph newColumn
			beColumn;
			separation: 15;
			color: Color lightBlue;
			borderColor: Color darkGray;
			borderWidth: 2;
			morphExtent: self defaultExtent;
			axisEdgeWeight: 0;
			addMorph: (
				LabelMorph contents: aMessageText
			);
			addMorph: (
				self buildOkButton
			);
			yourself
	).
		
	self openInWorld.
	! !
!MessageDialogWindow class methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:43:14' prior: 50907918!
message: aMessageText 

	^self new alerta: aMessageText.! !

!methodRemoval: MessageDialogWindow #initializeMessage: stamp: 'nz 7/7/2021 00:43:14'!
initializeMessage: aMessageText 
	
	self morphExtent: self defaultExtent.
	
	self addMorph: (
		LayoutMorph newColumn
			beColumn;
			separation: 15;
			color: Color lightBlue;
			borderColor: Color darkGray;
			borderWidth: 2;
			morphExtent: self defaultExtent;
			axisEdgeWeight: 0;
			addMorph: (
				LabelMorph contents: aMessageText
			);
			addMorph: (
				self buildOkButton
			);
			yourself
	).
		
	self openInWorld.
	!


MessageDialogWindow alerta: 'Probando alerta!!'.!
!MessageDialogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 00:43:41'!
initializeAlerta: aMessageText 
	
	self morphExtent: self defaultExtent.
	
	self addMorph: (
		LayoutMorph newColumn
			beColumn;
			separation: 15;
			color: Color lightBlue;
			borderColor: Color darkGray;
			borderWidth: 2;
			morphExtent: self defaultExtent;
			axisEdgeWeight: 0;
			addMorph: (
				LabelMorph contents: aMessageText
			);
			addMorph: (
				self buildOkButton
			);
			yourself
	).
		
	self openInWorld.
	! !
!MessageDialogWindow class methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:43:41' prior: 50908378!
message: aMessageText 

	^self new initializeAlerta: aMessageText.! !

!methodRemoval: MessageDialogWindow #alerta: stamp: 'nz 7/7/2021 00:43:41'!
alerta: aMessageText 
	
	self morphExtent: self defaultExtent.
	
	self addMorph: (
		LayoutMorph newColumn
			beColumn;
			separation: 15;
			color: Color lightBlue;
			borderColor: Color darkGray;
			borderWidth: 2;
			morphExtent: self defaultExtent;
			axisEdgeWeight: 0;
			addMorph: (
				LabelMorph contents: aMessageText
			);
			addMorph: (
				self buildOkButton
			);
			yourself
	).
		
	self openInWorld.
	!
!MessageDialogWindow class methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:43:50'!
alerta: aMessageText 

	^self new initializeAlerta: aMessageText.! !

!methodRemoval: MessageDialogWindow class #message: stamp: 'nz 7/7/2021 00:43:50'!
message: aMessageText 

	^self new initializeAlerta: aMessageText.!


MessageDialogWindow alerta: 'Probando alerta!!'.!
!MessageDialogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 00:44:18' prior: 50908401!
initializeAlerta: aMessageText 
	
	
	self setLabel: 'Atención!!'.
	self morphExtent: self defaultExtent.
	
	self addMorph: (
		LayoutMorph newColumn
			beColumn;
			separation: 15;
			color: Color lightBlue;
			borderColor: Color darkGray;
			borderWidth: 2;
			morphExtent: self defaultExtent;
			axisEdgeWeight: 0;
			addMorph: (
				LabelMorph contents: aMessageText
			);
			addMorph: (
				self buildOkButton
			);
			yourself
	).
		
	self openInWorld.
	! !


MessageDialogWindow alerta: 'Probando alerta!!'.!


MessageDialogWindow alerta: 'Probando alerta!!'.!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:44:50' prior: 50908317 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	"self morphExtent: (self defaultExtent).
	"self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:44:54' prior: 50908473 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	"self morphExtent: (self defaultExtent).
	"
	self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !


CreateCartWindow new.!
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:45:01' prior: 50908491 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	self morphExtent: (self defaultExtent).
	
	self buildCreateCartWindow.
	
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !


CreateCartWindow new.!


CreateCartWindow new.!


MessageDialogWindow alerta: 'Probando alerta!!'.!


CreateCartWindow new.!
!CreateCartWindow methodsFor: 'dialogs' stamp: 'nz 7/7/2021 00:45:52' prior: 50907858!
showBadLoginErrorDialog
	MessageDialogWindow alerta: 'Login Inválido!!'.! !

shop!

----SNAPSHOT----(7 July 2021 00:47:55) CuisUniversity-4532.image priorSource: 18450685!


CreateCartWindow new.!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 00:51:37'!
Panel subclass: #CatalogWindow
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CreateCartWindow methodsFor: 'navigation' stamp: 'nz 7/7/2021 00:53:56' prior: 50907853!
navigateToCatalogWindow
	
	"
	Hacer algo para movernos a la pantalla de catalogo
	"
	CatalogWindow forCart: self model cart.! !
!CreateCartWindow methodsFor: 'navigation' stamp: 'nz 7/7/2021 00:54:11' prior: 50908548!
navigateToCatalogWindow
	
	"
	Hacer algo para movernos a la pantalla de catalogo
	"
	CatalogWindow forCart: self model cart.
	self delete.! !


TusLibrosRestInterface allInstancesDo: [ 
	:server | server destroy ].
server _ TusLibrosRestInterface on: 8080 shop: shop.
!

!classDefinition: #CreateCartWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 00:57:10'!
Object subclass: #CreateCartWindowModel
	instanceVariableNames: 'userName password tusLibrosClient cartId lastError'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:57:06' prior: 50907943!
createCartRequest

	[
		self cart:
			(tusLibrosClient
				createCart: userName
				password: password).
		self
			triggerEvent: self class cartCreatedEvent
			with: self 
	]
		on: Error
		do: [ :error |
			lastError := error.
			self
				triggerEvent: self class cartCreationErrorEvent
				with: self.
		].
	"
	en el caso de que este ok: 
	- actualizar el modelo (guardarnos el id de carrito)
	- tirar un evento avisando que tenemos un carrito 
	en el caso de que falle:
	- tirar un evento con informacion del error
	
	despues:
	- capturar eventos en la vista y actuar en consecencia
	"! !
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:58:02' prior: 50908577!
createCartRequest

	[
		self cart:
			(tusLibrosClient
				createCart: userName
				password: password).
		self
			triggerEvent: self class cartCreatedEvent
			with: self 
	]
		on: Error - MessageNotUnderstood
		do: [ :error |
			lastError := error.
			self
				triggerEvent: self class cartCreationErrorEvent
				with: self.
		].
	"
	en el caso de que este ok: 
	- actualizar el modelo (guardarnos el id de carrito)
	- tirar un evento avisando que tenemos un carrito 
	en el caso de que falle:
	- tirar un evento con informacion del error
	
	despues:
	- capturar eventos en la vista y actuar en consecencia
	"! !
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:58:15'!
cart
	self shouldBeImplemented.! !
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:58:22' prior: 50908621!
cart
	^cartId.! !
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:58:44'!
cartId
	^cartId.! !
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:58:44' prior: 50908555!
navigateToCatalogWindow
	
	"
	Hacer algo para movernos a la pantalla de catalogo
	"
	CatalogWindow forCart: self model cartId.
	self delete.! !

!methodRemoval: CreateCartWindowModel #cart stamp: 'nz 7/7/2021 00:58:44'!
cart
	^cartId.!
!CreateCartWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 00:59:25' prior: 50908599!
createCartRequest

	[
		cartId := tusLibrosClient
			createCart: userName
			password: password.
		self
			triggerEvent: self class cartCreatedEvent
			with: self 
	]
		on: Error - MessageNotUnderstood
		do: [ :error |
			lastError := error.
			self
				triggerEvent: self class cartCreationErrorEvent
				with: self.
		].
	"
	en el caso de que este ok: 
	- actualizar el modelo (guardarnos el id de carrito)
	- tirar un evento avisando que tenemos un carrito 
	en el caso de que falle:
	- tirar un evento con informacion del error
	
	despues:
	- capturar eventos en la vista y actuar en consecencia
	"! !

!methodRemoval: CreateCartWindowModel #cart: stamp: 'nz 7/7/2021 00:59:33'!
cart: aCartId 
	cartId := aCartId.!
!CatalogWindow class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 01:00:02'!
forCart: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeForCart: aSmallInteger ! !
!CatalogWindow class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 01:00:18' prior: 50908671!
forCart: aCartId 
	^self new initializeForCartId: aCartId ! !

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 01:00:35'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'cartId'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:00:35'!
initializeForCartId: aCartId 
	self shouldBeImplemented.
	cartId := aCartId.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:00:39' prior: 50908692!
initializeForCartId: aCartId 
	
	cartId := aCartId.! !
!CatalogWindow class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 01:00:56'!
forCartId: aCartId 
	^self new initializeForCartId: aCartId ! !

!methodRemoval: CatalogWindow class #forCart: stamp: 'nz 7/7/2021 01:00:56'!
forCart: aCartId 
	^self new initializeForCartId: aCartId !
!CreateCartWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 01:02:09' prior: 50908510 overrides: 50865470!
initialize

	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Cree su carrito'.
	self model: CreateCartWindowModel new.
	self morphExtent: (self defaultExtent).
	
	self buildCreateCartWindow.
	
	self model when: self model class cartCreatedEvent send: #navigateToCatalogWindow to: self.
	self model when: self model class cartCreationErrorEvent send: #showBadLoginErrorDialog to: self.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:02:57' prior: 50908698!
initializeForCartId: aCartId 
	
	cartId := aCartId.
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: CreateCartWindowModel new.
	self morphExtent: (self defaultExtent).
	
	self buildCreateCartWindow.
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: self buildUserAndPasswordTextboxRow;
		addMorph: self buildCreateCartButtonRow.
	
	self openInWorld.! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 01:04:15'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:04:08' prior: 50908731!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (LabelMorph contents: 'Libro A');
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !

Panel subclass: #CatalogWindow
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 01:04:21'!
Panel subclass: #CatalogWindow
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CreateCartWindow methodsFor: 'navigation' stamp: 'nz 7/7/2021 01:04:59' prior: 50908634!
navigateToCatalogWindow
	
	"
	Hacer algo para movernos a la pantalla de catalogo
	"
	CatalogWindow forCartId: self model cartId.
	self delete.! !
!CatalogWindowModel class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 01:05:08'!
forCartId: aSmallInteger 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeForCartId: aSmallInteger ! !
!CatalogWindowModel class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 01:05:16' prior: 50908794!
forCartId: aCartId 
	^self new initializeForCartId: aCartId ! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 01:05:22'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:05:22'!
initializeForCartId: aCartId 
	self shouldBeImplemented.
	cartId := aCartId.! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:05:26' prior: 50908816!
initializeForCartId: aCartId 

	cartId := aCartId.! !


CreateCartWindow new.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:07:05' overrides: 50865461!
defaultExtent
	^1058@292! !


CreateCartWindow new.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:09:21' prior: 50908757!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CreateCartWindow new.!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:10:43' prior: 50908833!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	self halt.
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:11:24' prior: 50908854!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:11:39' prior: 50908875!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self addMorph: self layoutMorph.
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:11:47' prior: 50908895!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:11:58' prior: 50908917!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0.
	self
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:12:01' prior: 50908938!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0.
		
	self
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A')
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:13:09' prior: 50908958!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0.
		
	self
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:13:29' prior: 50908979!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:16:02' prior: 50909004!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:16:14' prior: 50909029!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	
	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:16:29' prior: 50909055!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).
	self 
		color: Color red.
	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:16:38' prior: 50909081!
initializeForCartId: aCartId 
	
	super initialize.
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:17:06' prior: 50909108!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'TEST BUTTON'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:17:30' prior: 50909133!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newRow
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:17:52' prior: 50909159!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beColumn;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:17:57' prior: 50909185!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO'
				)
		);
		addMorph: (LabelMorph contents: 'Libro B').
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:19:03' prior: 50909210!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Refactoring - Improving the Design of Existing Code');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Libro A');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO'
				)
		).
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:19:39' prior: 50909235!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Refactoring - Improving the Design of Existing Code');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Test-Driven Development by Example');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO'
				)
		).
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:19:49' prior: 50909270!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph 
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Refactoring - Improving the Design of Existing Code');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (LabelMorph contents: 'Test-Driven Development by Example');
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!

self layoutMorph !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:24:09' prior: 50909306!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph addMorph: (
		PluggableScrollPane new addMorph: (
			LayoutMorph newRow
				separation: 15;
				color: Color red;
				axisEdgeWeight: 0;
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph 
								contents: 'Refactoring - Improving the Design of Existing Code'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO YA'
						)
				);
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph
								contents: 'Test-Driven Development by Example'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
						)
				)
		)
	).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:25:01' prior: 50909345!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph addMorph: (
		PluggableScrollPane new
			morphExtent: (self defaultExtent);
			addMorph: (
			LayoutMorph newRow
				separation: 15;
				color: Color red;
				axisEdgeWeight: 0;
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph 
								contents: 'Refactoring - Improving the Design of Existing Code'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO YA'
						)
				);
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph
								contents: 'Test-Driven Development by Example'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
						)
				)
		)
	).
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:25:11' prior: 50909388!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph addMorph: (
		PluggableScrollPane new morphExtent: (self defaultExtent); addMorph: (
			LayoutMorph newRow
				separation: 15;
				color: Color red;
				axisEdgeWeight: 0;
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph 
								contents: 'Refactoring - Improving the Design of Existing Code'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO YA'
						)
				);
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph
								contents: 'Test-Driven Development by Example'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
						)
				)
		)
	).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:27:40' prior: 50909431!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph addMorph: (
		PluggableScrollPane new morphExtent: (self defaultExtent - (8@20)); addMorph: (
			LayoutMorph newRow
				separation: 15;
				color: Color red;
				axisEdgeWeight: 0;
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph 
								contents: 'Refactoring - Improving the Design of Existing Code'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO YA'
						)
				);
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph
								contents: 'Test-Driven Development by Example'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
						)
				)
		)
	).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:29:51' prior: 50909476!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph addMorph: (
		PluggableScrollPane new morphExtent: (self defaultExtent - (8@20)); addMorph: (
			LayoutMorph newRow
				separation: 15;
				color: Color red;
				axisEdgeWeight: 0;
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph 
								contents: 'Refactoring - Improving the Design of Existing Code'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO YA'
						);
						yourself
				);
				addMorph: (
					LayoutMorph newColumn
						separation: 25;
						axisEdgeWeight: 0.5;
						color: Color blue;
						addMorph: (
							LabelMorph
								contents: 'Test-Driven Development by Example'
						);
						addMorph: (
							PluggableButtonMorph
								model: self model
								stateGetter: nil
								action: #test
								label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
						);
						yourself
				);
				yourself
		);
		yourself
	).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:32:23' prior: 50909520!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).


	self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		).
	
	self openInWorld.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:35:35' prior: 50909566!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		).
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 01:44:25' prior: 50909605!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self halt.
	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	"

	self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		).
	
	self openInWorld.! !

----QUIT----(7 July 2021 01:45:02) CuisUniversity-4532.image priorSource: 18460338!

----STARTUP---- (7 July 2021 14:30:42) as /home/nikita/r/f/isw1/Inge1-ejercicios/20-TusLibros-Iteracion-4/CuisUniversity-4532.image!

!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:45:06' prior: 50909643!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self halt.
	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	"

	self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		).
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:45:32'!
buildWindowBody

	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		)! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:45:32' prior: 50909714!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self halt.
	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	"

	self buildWindowBody.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:45:36' prior: 50909807!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	self halt.
	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	"
	self buildWindowBody.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:49:02' prior: 50909777!
buildWindowBody


	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		)! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:49:58' prior: 50909883!
buildWindowBody


	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartPart.
		
		"
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		);
		"! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:55:09'!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			PluggableListMorph
				model: self model
				listGetter: #catalogEntries 
				indexGetter: #selectedCatalogEntry
				indexSetter: #selectedCatalogEntry:
		);
		addMorph: (
			 LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				);
				yourself
		);
		yourself.
		! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:55:53'!
buildCartHalf
	
	^ LabelMorph
		contents: 'HERE BE CART'.! !


CreateCartWindow new.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 14:56:27' prior: 50909845!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	"
	self buildWindowBody.
	
	self openInWorld.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 14:56:41'!
catalogEntries
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 14:57:06' prior: 50910012!
catalogEntries
	^OrderedCollection with: 'Libro A' with: 'Libro B'.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 14:57:17'!
selectedCatalogEntry
	self shouldBeImplemented.! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 14:57:28'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntry'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 14:57:27' prior: 50910022!
selectedCatalogEntry
	^selectedCatalogEntry.! !


CreateCartWindow new.!
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:00:07' prior: 50908822!
initializeForCartId: aCartId 

	cartId := aCartId.
	selectedCatalogEntry := 0.! !


CreateCartWindow new!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:00:25' prior: 50909913!
buildWindowBody


	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		
		"
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph 
						contents: 'Refactoring - Improving the Design of Existing Code'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO YA'
				)
		);
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				color: Color blue;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				)
		);
		"! !


CreateCartWindow new.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:01'!
selectedCatalogEntry: aSmallInteger 
	self shouldBeImplemented.
	selectedCatalogEntry _ aSmallInteger! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:05' prior: 50910082!
selectedCatalogEntry: aSmallInteger 

	selectedCatalogEntry _ aSmallInteger! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:28' prior: 50910036!
selectedCatalogEntry
	^selectedCatalogEntry.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:38'!
selectedCatalogEntryIndex
	^selectedCatalogEntry.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:38' prior: 50909945!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			PluggableListMorph
				model: self model
				listGetter: #catalogEntries 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntry:
		);
		addMorph: (
			 LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				);
				yourself
		);
		yourself.
		! !

!methodRemoval: CatalogWindowModel #selectedCatalogEntry stamp: 'nz 7/7/2021 15:01:38'!
selectedCatalogEntry
	^selectedCatalogEntry.!

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:01:42'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntryIndex'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:42' prior: 50910100!
selectedCatalogEntryIndex
	^selectedCatalogEntryIndex.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:42' prior: 50910042!
initializeForCartId: aCartId 

	cartId := aCartId.
	selectedCatalogEntryIndex := 0.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:42' prior: 50910089!
selectedCatalogEntry: aSmallInteger 

	selectedCatalogEntryIndex _ aSmallInteger! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:52'!
selectedCatalogEntryIndex: aSmallInteger 

	selectedCatalogEntryIndex _ aSmallInteger! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:01:52' prior: 50910105!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			PluggableListMorph
				model: self model
				listGetter: #catalogEntries 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntryIndex:
		);
		addMorph: (
			 LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				);
				yourself
		);
		yourself.
		! !

!methodRemoval: CatalogWindowModel #selectedCatalogEntry: stamp: 'nz 7/7/2021 15:01:52'!
selectedCatalogEntry: aSmallInteger 

	selectedCatalogEntryIndex _ aSmallInteger!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:03:15' prior: 50910165!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Libros disponibles:'
				);
				addMorph: (
					PluggableListMorph
						model: self model
						listGetter: #catalogEntries 
						indexGetter: #selectedCatalogEntryIndex
						indexSetter: #selectedCatalogEntryIndex:
				);
				yourself
			
		);
		addMorph: (
			 LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				);
				yourself
		);
		yourself.
		! !


CatalogWindow forCartId: 3.!

Object subclass: #CatalogWindowBookEntry
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogWindowBookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:04:34'!
Object subclass: #CatalogWindowBookEntry
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowBookEntry methodsFor: 'no messages' stamp: 'nz 7/7/2021 15:05:20'!
title
	^'Refactoring'.! !
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:05:38'!
price
	^129.90! !
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:05:42' prior: 50910242!
price
	^29.90! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:09:41'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntryIndex catalogEntries'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:09:39' prior: 50910147!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection
		with: (CatalogWindowBookEntry price: 29.90 name: 'Refactoring' isbn: '0001')
		with: (CatalogWindowBookEntry price: 24.90 name: 'TDD by example' isbn: '0002').! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:10:29' prior: 50910259!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection
		with: (CatalogWindowBookEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogWindowBookEntry price: 24.90 title: 'TDD by example' isbn: '0002').! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:12:28'!
catalogEntriesTitles
	^OrderedCollection with: 'Libro A' with: 'Libro B'.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:12:28' prior: 50910195!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Libros disponibles:'
				);
				addMorph: (
					PluggableListMorph
						model: self model
						listGetter: #catalogEntriesTitles 
						indexGetter: #selectedCatalogEntryIndex
						indexSetter: #selectedCatalogEntryIndex:
				);
				yourself
			
		);
		addMorph: (
			 LayoutMorph newColumn
				separation: 25;
				axisEdgeWeight: 0.5;
				addMorph: (
					LabelMorph
						contents: 'Test-Driven Development by Example'
				);
				addMorph: (
					PluggableButtonMorph
						model: self model
						stateGetter: nil
						action: #test
						label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
				);
				yourself
		);
		yourself.
		! !

!methodRemoval: CatalogWindowModel #catalogEntries stamp: 'nz 7/7/2021 15:12:28'!
catalogEntries
	^OrderedCollection with: 'Libro A' with: 'Libro B'.!
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:12:50'!
isbn
	^'0001'.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:13:44' prior: 50910283!
catalogEntriesTitles
	^catalogEntries collect: [ :entry | entry title ].! !


CatalogWindow forCartId: 3.!
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:05'!
price: aSmallFloat64 title: aString isbn: aString3 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializePrice: aSmallFloat64 title: aString isbn: aString3 ! !
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:17' prior: 50910335!
price: aSmallFloat64 title: aString isbn: aString3 
	
	^self new initializePrice: aSmallFloat64 title: aString isbn: aString3 ! !
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:20' prior: 50910346!
price: aPrice title: aString isbn: aString3 
	
	^self new initializePrice: aPrice title: aString isbn: aString3 ! !
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:29' prior: 50910354!
price: aPrice title: aTitle isbn: aString3 
	
	^self new initializePrice: aPrice title: aTitle isbn: aString3 ! !
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:36' prior: 50910362!
price: aPrice title: aTitle isbn: anISBN 
	
	^self new initializePrice: aPrice title: aTitle isbn: anISBN ! !
!CatalogWindowBookEntry class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 15:14:51' prior: 50910369!
price: aPrice title: aTitle isbn: anIsbn
	
	^self new initializePrice: aPrice title: aTitle isbn: anIsbn ! !

!classDefinition: #CatalogWindowBookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:14:58'!
Object subclass: #CatalogWindowBookEntry
	instanceVariableNames: 'price'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogWindowBookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:14:58'!
Object subclass: #CatalogWindowBookEntry
	instanceVariableNames: 'price title'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogWindowBookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:14:58'!
Object subclass: #CatalogWindowBookEntry
	instanceVariableNames: 'price title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowBookEntry methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:14:58'!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	self shouldBeImplemented.
	price := aPrice.
	title := aTitle.
	isbn := anIsbn.! !
!CatalogWindowBookEntry methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:15:03' prior: 50910408!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	price := aPrice.
	title := aTitle.
	isbn := anIsbn.! !


CatalogWindow forCartId: 3.
!
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:16:54' prior: 50910324!
isbn
	^isbn! !
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:16:58' prior: 50910246!
price
	^price! !
!CatalogWindowBookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:17:03' prior: 50910238!
title
	^title! !


CatalogWindow forCartId: 3.
!


CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:18:47' prior: 50910159!
selectedCatalogEntryIndex: aSmallInteger 

	selectedCatalogEntryIndex _ aSmallInteger.
	
	self
		triggerEvent: #selectedCatalogEntryChanged
		with: self.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:19:05' prior: 50909974!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	selectedCatalogEntryChanged
	"
	self buildWindowBody.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:20:08' prior: 50910446!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntry to: self.
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:20:18'!
rebuildSelectedCatalogEntry
	self shouldBeImplemented.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:20:28' prior: 50910527!
rebuildSelectedCatalogEntry

	self halt.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:23:20'!
buildCatalogTitleList

	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Libros disponibles:'
		);
		addMorph: (
			PluggableListMorph
				model: self model
				listGetter: #catalogEntriesTitles 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntryIndex:
		);
		yourself.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:24:08' prior: 50910289!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCatalogTitleList;
		addMorph: self buildSelectedCatalogEntryInfo;
		yourself.
		! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 15:24:24'!
buildSelectedCatalogEntryInfo
	
	 ^LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Test-Driven Development by Example'
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
		);
		yourself! !


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:41:39'!
rebuildSelectedCatalogEntryInfo

	self halt.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:41:39' prior: 50910485!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildSelectedCatalogEntry stamp: 'nz 7/7/2021 15:41:39'!
rebuildSelectedCatalogEntry

	self halt.!


CatalogWindow forCartId: 3.!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 15:45:28'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:45:27' prior: 50910560!
buildSelectedCatalogEntryInfo
	
	selectedCatalogEntryInfoLayout _ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Test-Driven Development by Example'
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
		);
		yourself.
		
	^selectedCatalogEntryInfoLayout.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:46:00' prior: 50910636!
buildSelectedCatalogEntryInfo
	
	selectedCatalogEntryInfoLayout _ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	^selectedCatalogEntryInfoLayout.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:46:04' prior: 50910653!
buildSelectedCatalogEntryInfo
	
	selectedCatalogEntryInfoLayout _ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildSelectedCatalogEntryInfo.
		
	^selectedCatalogEntryInfoLayout.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:46:18' prior: 50910576!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: 'Test-Driven Development by Example'
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
		).! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:46:56' prior: 50910672!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs .

	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: 'Test-Driven Development by Example'
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'AGREGAR AL CARRITO PERO RECONTRA YA'
		).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:47:44' prior: 50910686!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	self model selectedEntry title

	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:48:25' prior: 50910701!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	self model selectedEntry title

	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:48:37' prior: 50910716!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.

	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:48:54' prior: 50910734!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	
	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:49:35' prior: 50910751!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	
	self model selectedEntry ifNil: [^nil].
	
	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !


CatalogWindow forCartId: 3.!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:51:07'!
selectedEntry
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:52:37' prior: 50910787!
selectedEntry
	selectedCatalogEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^catalogEntries at: selectedCatalogEntryIndex ].! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 15:53:56' prior: 50910768!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	
	self model selectedEntry ifNil: [
		selectedCatalogEntryInfoLayout addMorph: (LabelMorph contents: 'Seleccione un libro de la izquierda' ).
		^nil.
	].
	
	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #test
				label: 'Add to Cart'
		).! !


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:02:19' prior: 50910799!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	
	self model selectedEntry ifNil: [
		selectedCatalogEntryInfoLayout addMorph: (LabelMorph contents: 'Seleccione un libro de la izquierda' ).
		^nil.
	].
	
	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #addSelectedCatalogEntryToCart
				label: 'Add to Cart'
		).! !


CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:02:30'!
addSelectedCatalogEntryToCart
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:02:41' prior: 50910845!
addSelectedCatalogEntryToCart
	self halt.! !


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:13:26' prior: 50909968!
buildCartHalf
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCatalogTitleList;
		addMorph: self buildSelectedCatalogEntryInfo;
		yourself.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:13:58' prior: 50910858!
buildCartHalf
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCartList;
		addMorph: self buildCartSummary;
		yourself.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:14:17'!
buildCartSummary! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:14:27' prior: 50910049!
buildWindowBody


	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:14:29' prior: 50910879!
buildWindowBody

	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:14:58' prior: 50910875!
buildCartSummary
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCatalogTitleList;
		addMorph: self buildSelectedCatalogEntryInfo;
		yourself.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:15:31' prior: 50910897!
buildCartSummary
	
	^ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCartTotal;
		addMorph: self buildCheckoutButton;
		yourself.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:15:39'!
buildCartTotal! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:16:19' prior: 50910914!
buildCartTotal

	LabelMorph
		contents: ('Total: $ ', self model cartTotal).! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:17:04'!
buildCheckoutButton! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:17:33' prior: 50910923!
buildCheckoutButton

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:17:37' prior: 50910927!
buildCheckoutButton

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:17:48'!
buildCartList
	self shouldBeImplemented.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:17:51' prior: 50910943!
buildCartList
	! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:19:49' prior: 50910948!
buildCartList
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'En el carrito:'
		);
		addMorph: (
			PluggableListMorph
				model: self model
				listGetter: #cartEntriesTitles
				indexGetter: #selectedCartEntryIndex
				indexSetter: #selectedCartEntryIndex:
		);
		yourself.! !


CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:20:00'!
cartEntriesTitles
	self shouldBeImplemented.! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:21:28'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntryIndex catalogEntries cartEntries'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:21:26' prior: 50910967!
cartEntriesTitles
	^cartEntries collect: [ :entry | entry title, ' x', entry quantity asString ].! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:23:05'!
selectedCatalogEntry
	selectedCatalogEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^catalogEntries at: selectedCatalogEntryIndex ].! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:23:05' prior: 50910822!
rebuildSelectedCatalogEntryInfo

	selectedCatalogEntryInfoLayout removeAllMorphs.
	
	self model selectedCatalogEntry ifNil: [
		selectedCatalogEntryInfoLayout addMorph: (LabelMorph contents: 'Seleccione un libro de la izquierda' ).
		^nil.
	].
	
	selectedCatalogEntryInfoLayout 
		addMorph: (
			LabelMorph
				contents: self model selectedCatalogEntry title
		);
		addMorph: (
			LabelMorph
				contents: ('$ ', self model selectedCatalogEntry price asString)
		);
		addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #addSelectedCatalogEntryToCart
				label: 'Add to Cart'
		).! !

!methodRemoval: CatalogWindowModel #selectedEntry stamp: 'nz 7/7/2021 16:23:05'!
selectedEntry
	selectedCatalogEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^catalogEntries at: selectedCatalogEntryIndex ].!

Object subclass: #CartWindowEntry
	instanceVariableNames: 'quantity title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CartWindowEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:23:35'!
Object subclass: #CartWindowEntry
	instanceVariableNames: 'quantity title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classRenamed: #CatalogWindowBookEntry as: #CatalogEntry stamp: 'nz 7/7/2021 16:24:08'!
Smalltalk renameClassNamed: #CatalogWindowBookEntry as: #CatalogEntry!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:24:08' prior: 50910271!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').! !

!classRenamed: #CartWindowEntry as: #CartEntry stamp: 'nz 7/7/2021 16:24:36'!
Smalltalk renameClassNamed: #CartWindowEntry as: #CartEntry!

!classDefinition: #BookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:08'!
Object subclass: #BookEntry
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CartEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:08'!
BookEntry subclass: #CartEntry
	instanceVariableNames: 'quantity title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CartEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:20'!
BookEntry subclass: #CartEntry
	instanceVariableNames: 'quantity isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #BookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:20'!
Object subclass: #BookEntry
	instanceVariableNames: 'title'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CartEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:27'!
BookEntry subclass: #CartEntry
	instanceVariableNames: 'isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #BookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:25:27'!
Object subclass: #BookEntry
	instanceVariableNames: 'title quantity'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:00'!
Object subclass: #CatalogEntry
	instanceVariableNames: 'xprice title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:00' prior: 50910416!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	xprice := aPrice.
	title := aTitle.
	isbn := anIsbn.! !
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:00' prior: 50910428!
price
	^xprice! !

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:07'!
Object subclass: #CatalogEntry
	instanceVariableNames: 'price title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:07' prior: 50911119!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	price := aPrice.
	title := aTitle.
	isbn := anIsbn.! !
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:07' prior: 50911126!
price
	^price! !

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:10'!
Object subclass: #CatalogEntry
	instanceVariableNames: 'price titlex isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:10' prior: 50911138!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	price := aPrice.
	titlex := aTitle.
	isbn := anIsbn.! !
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:10' prior: 50910432!
title
	^titlex! !

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:13'!
Object subclass: #CatalogEntry
	instanceVariableNames: 'price titlex isbnx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:13' prior: 50910424!
isbn
	^isbnx! !
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:13' prior: 50911157!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	price := aPrice.
	titlex := aTitle.
	isbnx := anIsbn.! !

BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price titlex isbnx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:18'!
BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price titlex isbnx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price isbnx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:24'!
BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price isbnx'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CatalogEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:26:26'!
BookEntry subclass: #CatalogEntry
	instanceVariableNames: 'price'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:34' prior: 50911164!
title
	^title! !
!BookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:26:39'!
title
	^title! !

!methodRemoval: CatalogEntry #title stamp: 'nz 7/7/2021 16:26:39'!
title
	^title!

!classDefinition: #CartEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:27:05'!
BookEntry subclass: #CartEntry
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #BookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:27:05'!
Object subclass: #BookEntry
	instanceVariableNames: 'title quantity isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

Object subclass: #BookEntry
	instanceVariableNames: 'title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #BookEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:27:11'!
Object subclass: #BookEntry
	instanceVariableNames: 'title isbn'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

BookEntry subclass: #CartEntry
	instanceVariableNames: 'quantity'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!

!classDefinition: #CartEntry category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:27:18'!
BookEntry subclass: #CartEntry
	instanceVariableNames: 'quantity'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:27:30' prior: 50911176!
isbn
	^isbn! !
!BookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:27:36'!
isbn
	^isbn! !

!methodRemoval: CatalogEntry #isbn stamp: 'nz 7/7/2021 16:27:36'!
isbn
	^isbn!
!BookEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:28:19'!
initializeIsbn: anIsbn title: aTitle
	isbn _ anIsbn.
	title _ aTitle.! !
!CatalogEntry methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:28:48' prior: 50911180!
initializePrice: aPrice title: aTitle isbn: anIsbn 
	
	self initializeIsbn: anIsbn title: aTitle.
	price := aPrice.! !
!CartEntry methodsFor: 'no messages' stamp: 'nz 7/7/2021 16:29:19'!
initializeQuantity: aQuantity title: aTitle isbn: anIsbn 
	
	self initializeIsbn: anIsbn title: aTitle.
	quantity := aQuantity.! !
!CartEntry class methodsFor: 'no messages' stamp: 'nz 7/7/2021 16:30:03'!
quantity: aQuantity title: aTitle isbn: anIsbn
	
	^self new initializeQuantity: aQuantity title: aTitle isbn: anIsbn ! !
!CartEntry methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:30:34'!
quantity
	^quantity! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:32:49' prior: 50911044!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').
		
		
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 1 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 2 title: 'TDD by example' isbn: '0002').! !


CatalogWindow forCartId: 3.!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:33:12'!
selectedCartEntryIndex
	self shouldBeImplemented.! !

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 16:33:23'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntryIndex catalogEntries cartEntries selectedCartEntryIndex'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:33:22' prior: 50911331!
selectedCartEntryIndex
	
	^selectedCartEntryIndex! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:33:35' prior: 50911313!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	selectedCartEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').
		
		
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 1 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 2 title: 'TDD by example' isbn: '0002').! !


CatalogWindow forCartId: 3.!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:33:44'!
cartTotal
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:33:48' prior: 50911371!
cartTotal
	^99! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:33:51' prior: 50911376!
cartTotal
	^99.90! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:34:02' prior: 50910918!
buildCartTotal

	LabelMorph
		contents: ('Total: $ ', self model cartTotal asString).! !


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:35:42' prior: 50910888!
buildWindowBody

	self halt.
	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:37:16' prior: 50911384!
buildCartTotal

	^LabelMorph
		contents: ('Total: $ ', self model cartTotal asString).! !


CatalogWindow forCartId: 3.!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:37:32'!
selectedCartEntryIndex: aSmallInteger 
	self shouldBeImplemented.
	selectedCartEntryIndex _ aSmallInteger! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:37:36' prior: 50911410!
selectedCartEntryIndex: aSmallInteger 
	
	selectedCartEntryIndex _ aSmallInteger! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:37:47' prior: 50911393!
buildWindowBody

	^ self layoutMorph
		beRow;
		separation: 15;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:38:26' prior: 50908828 overrides: 50865461!
defaultExtent
	^1060@500! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:42:33' prior: 50910581!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !


CatalogWindow forCartId: 3.!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:42:51'!
refreshCatalog
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 16:43:15' prior: 50911352!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	selectedCartEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection new.
		
		
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 1 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 2 title: 'TDD by example' isbn: '0002').! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:43:20' prior: 50911484!
refreshCatalog
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').
	! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:43:46' prior: 50911503!
refreshCatalog
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').
	self 
		triggerEvent: #catalogUpdated
		with: self.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:43:54' prior: 50911513!
refreshCatalog
	
	catalogEntries _ OrderedCollection
		with: (CatalogEntry price: 29.90 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry price: 24.90 title: 'TDD by example' isbn: '0002').
	
	self 
		triggerEvent: #catalogUpdated
		with: self.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:44:22'!
rebuildCatalogTitleList
	self shouldBeImplemented.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:44:27' prior: 50911536!
rebuildCatalogTitleList
	
	self halt.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:45:57' prior: 50911541!
rebuildCatalogTitleList
	
	"No hay nada que rebuildear en realidad, el PluggableListMorph ya se actualiza solo"! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:46:01' prior: 50911546!
rebuildCatalogTitleList
	
	"No hay nada que rebuildear en realidad, el PluggableListMorph ya se actualiza solo"! !


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:46:42' prior: 50911553!
rebuildCatalogTitleList
	
	"No hay nada que rebuildear en realidad, el PluggableListMorph ya se actualiza solo"
	self redrawNeeded ! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:46:44' prior: 50911561!
rebuildCatalogTitleList
	
	self redrawNeeded ! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:46:57' prior: 50911569!
rebuildCatalogTitleList
	
	self halt
	self redrawNeeded ! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:46:58' prior: 50911575!
rebuildCatalogTitleList
	
	self halt.
	self redrawNeeded ! !


CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:48:37' prior: 50911580!
rebuildCatalogTitleList
	
	self halt.
	self submorphsDo: [ :morph | morph halt ].  
	self redrawNeeded ! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:48:38' prior: 50911586!
rebuildCatalogTitleList
	
	self submorphsDo: [ :morph | morph halt ].  
	self redrawNeeded ! !


CatalogWindow forCartId: 3.!


CatalogWindow forCartId: 3.!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 16:49:45' prior: 50911593!
rebuildCatalogTitleList
	
	self redrawNeeded ! !


w _ CatalogWindow forCartId: 3.!

w world explore.!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 17:11:19'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogListMorph'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:11:18' prior: 50910536!
buildCatalogTitleList

	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Libros disponibles:'
		);
		addMorph: [
			catalogListMorph _ PluggableListMorph
				model: self model
				listGetter: #catalogEntriesTitles 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntryIndex:.
			catalogListMorph
		] value;
		yourself.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:11:35' prior: 50911601!
rebuildCatalogTitleList
	
	self catalogListMorph updateList! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:11:54' prior: 50911633!
rebuildCatalogTitleList
	
	catalogListMorph updateList! !

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 17:11:58'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:11:58' prior: 50911638!
rebuildCatalogTitleList
	
	catalogTitleListMorph updateList! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:11:58' prior: 50911617!
buildCatalogTitleList

	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Libros disponibles:'
		);
		addMorph: [
			catalogTitleListMorph _ PluggableListMorph
				model: self model
				listGetter: #catalogEntriesTitles 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntryIndex:.
			catalogTitleListMorph
		] value;
		yourself.! !

w world explore.!


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 17:12:24' prior: 50911652!
rebuildCatalogTitleList
	
	"Hay que avisarle a mano a la lista que cambió"
	catalogTitleListMorph updateList! !


w _ CatalogWindow forCartId: 3.
!

----SNAPSHOT----(7 July 2021 17:12:56) CuisUniversity-4532.image priorSource: 18497769!


CreateCartWindow new.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 18:05:03' prior: 50911439!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #cartEntryAdded send: #rebuildCartHalf to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:05:35' prior: 50910851!
addSelectedCatalogEntryToCart
	self halt.
	"cartEntryAdded"! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:05:55' prior: 50911736!
addSelectedCatalogEntryToCart
	self halt.
	
	self
		triggerEvent: #cartEntryAdded
		with: self.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:06:20' prior: 50911742!
addSelectedCatalogEntryToCart
	
	self
		triggerEvent: #cartEntryAdded
		with: self.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:06:30'!
rebuildCartHalf
	self shouldBeImplemented.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:06:33' prior: 50911756!
rebuildCartHalf
	self halt! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:06:43' prior: 50911761!
rebuildCartHalf
	self shouldBeImplemented! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:07:44' prior: 50911765!
rebuildCartHalf

	self model refreshCart.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:08:35'!
refreshCart
	
	catalogEntries _ OrderedCollection
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CatalogEntry quantity: 9 title: 'TDD by example' isbn: '0002').
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 18:09:27' prior: 50911689!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #cartUpdated send: #rebuildCartList to: self.
	self model when: #cartEntryAdded send: #rebuildCartHalf to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 18:09:52' prior: 50911786!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #cartUpdated send: #rebuildCartList to: self.
	self model when: #cartEntryAdded send: #rebuildCartHalf to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:10:41'!
triggerRefreshCart

	self model refreshCart.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:10:41' prior: 50911835!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #cartUpdated send: #rebuildCartList to: self.
	self model when: #cartEntryAdded send: #triggerRefreshCart to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildCartHalf stamp: 'nz 7/7/2021 18:10:41'!
rebuildCartHalf

	self model refreshCart.!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:11:13' prior: 50911775!
refreshCart
	
	catalogEntries _ OrderedCollection
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:11:32'!
rebuildCartList
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:12:13' prior: 50911942!
refreshCart
	
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 18:20:24' prior: 50911489!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	selectedCartEntryIndex _ 0.
	
	catalogEntries _ OrderedCollection new.
		
		
	cartEntries _ OrderedCollection new.! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 18:21:11'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:21:04' prior: 50911954!
rebuildCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:21:35'!
updateCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:21:35' prior: 50911888!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #rebuildCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #triggerRefreshCart to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildCartList stamp: 'nz 7/7/2021 18:21:35'!
rebuildCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:21:44'!
updateCatalogTitleList
	
	"Hay que avisarle a mano a la lista que cambió"
	catalogTitleListMorph updateList! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:21:44' prior: 50912005!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #triggerRefreshCart to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildCatalogTitleList stamp: 'nz 7/7/2021 18:21:44'!
rebuildCatalogTitleList
	
	"Hay que avisarle a mano a la lista que cambió"
	catalogTitleListMorph updateList!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:23:56' prior: 50910952!
buildCartList
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'En el carrito:'
		);
		addMorph: [
			cartListMorph _ PluggableListMorph
				model: self model
				listGetter: #cartEntriesTitles
				indexGetter: #selectedCartEntryIndex
				indexSetter: #selectedCartEntryIndex:.
			cartListMorph
		] value;
		yourself.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:27:15' prior: 50910867!
buildCartHalf
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		addMorph: self buildCartList;
		addMorph: self buildRemoveCartEntryButton;
		addMorph: self buildCartSummary;
		yourself.
		! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:29:04'!
buildRemoveCartEntryButton

	self model currentCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remove '.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:29:48' prior: 50912149!
buildRemoveCartEntryButton

	self model currentCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model currentCartEntry title.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:30:20'!
currentCartEntry
	selectedCartEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^cartEntries at: selectedCartEntryIndex ].! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:30:29'!
selectedCartEntry
	selectedCartEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^cartEntries at: selectedCartEntryIndex ].! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:30:29' prior: 50912160!
buildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !

!methodRemoval: CatalogWindowModel #currentCartEntry stamp: 'nz 7/7/2021 18:30:29'!
currentCartEntry
	selectedCartEntryIndex isZero ifTrue: [ ^nil ] ifFalse: [ ^cartEntries at: selectedCartEntryIndex ].!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:31:16' prior: 50912186!
buildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del \ncarrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:31:35' prior: 50912206!
buildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del ', 'carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:33:15' prior: 50912220!
buildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del ', Character cr asString, 'carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:33:29' prior: 50912233!
buildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:34:10' prior: 50911434 overrides: 50865461!
defaultExtent
	^1300@600.0! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:34:12' prior: 50912262 overrides: 50865461!
defaultExtent
	^1300@600! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:35:23' prior: 50912066!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #triggerRefreshCart to: self.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:35:34'!
rebuildRemoveCartEntryButton

	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 18:37:11'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph cartEntrySlot'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:37:10' prior: 50912323!
rebuildRemoveCartEntryButton

	

	self model selectedCartEntry ifNil: [
		cartEntrySlot _ LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	] ifNotNil: [
		cartEntrySlot _ PluggableButtonMorph
			model: self model
			stateGetter: nil
			action: #checkoutCart
			label: 'Remover ', self model selectedCartEntry title.
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:37:43' prior: 50912248!
buildRemoveCartEntryButton


	cartEntrySlot _ LayoutMorph new.
	
	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:38:15' prior: 50912360!
buildRemoveCartEntryButton


	cartEntrySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	
	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:38:31' prior: 50912374!
buildRemoveCartEntryButton


	cartEntrySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildRemoveCartEntryButton .
	
	self model selectedCartEntry ifNil: [
		^LabelMorph contents: 'Seleccione un item del carrito para removerlo.'.
	].

	^PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Remover ', self model selectedCartEntry title.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:38:36' prior: 50912390!
buildRemoveCartEntryButton

	cartEntrySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildRemoveCartEntryButton .
	! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:40:05' prior: 50912346!
rebuildRemoveCartEntryButton

	

	self model selectedCartEntry ifNil: [
		cartEntrySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartEntrySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:40:19' prior: 50912416!
rebuildRemoveCartEntryButton

	cartEntrySlot removeAllMorphs .
	self model selectedCartEntry ifNil: [
		cartEntrySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartEntrySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:40:21' prior: 50912432!
rebuildRemoveCartEntryButton

	cartEntrySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartEntrySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartEntrySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:41:16' prior: 50912407!
buildRemoveCartEntryButton

	cartEntrySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	^ self rebuildRemoveCartEntryButton .
	! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:42:46' prior: 50912467!
buildRemoveCartEntryButton

	cartEntrySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildRemoveCartEntryButton .
	
	^cartEntrySlot 
	! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:43:35' prior: 50911417!
selectedCartEntryIndex: aSmallInteger 
	
	selectedCartEntryIndex _ aSmallInteger.
	
	self
		triggerEvent: #selectedCartEntryChanged
		with: self.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:44:42' prior: 50912448!
rebuildRemoveCartEntryButton

	cartEntrySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartEntrySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartEntrySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:44:59'!
removeSelectedCartEntry
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:45:14' prior: 50912516!
removeSelectedCartEntry
	self shouldBeImplemented.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:45:48' prior: 50911750!
addSelectedCatalogEntryToCart
	
	self
		triggerEvent: #cartEntryAdded
		with: self.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:46:05' prior: 50912521!
removeSelectedCartEntry
	
	self
		triggerEvent: #cartEntryRemoved
		with: self.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:46:37' prior: 50912272!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #triggerRefreshCart stamp: 'nz 7/7/2021 18:46:44'!
triggerRefreshCart

	self model refreshCart.!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:47:04' prior: 50912538!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #cartEntryRemoved send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:48:23' prior: 50912532!
removeSelectedCartEntry
	
	cartEntries _ OrderedCollection new.
		
	self
		triggerEvent: #cartEntryRemoved
		with: self.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:48:52' prior: 50912650!
removeSelectedCartEntry
	
	self
		triggerEvent: #cartEntryRemoved
		with: self.! !


w _ CatalogWindow forCartId: 3.
!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 18:51:28'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph cartEntrySlot cartTotalLabel'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:51:26' prior: 50911403!
buildCartTotal

	cartTotalLabel _ LabelMorph
		contents: ('Total: $ ', self model cartTotal asString).
		
	^cartTotalLabel.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:52:14' prior: 50911999!
updateCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList.
	cartTotalLabel ! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:52:26' prior: 50912684!
updateCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList.
	cartTotalLabel inspect.
	self halt.! !


w _ CatalogWindow forCartId: 3.
!

self contents: 'Total: ^^^^'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:53:30' prior: 50912691!
updateCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList.
	self updateCartTotal.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:54:33'!
updateCartTotal

	cartTotalLabel contents: 'Total $ ', self model cartTotal.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:55:57' prior: 50912677!
buildCartTotal

	cartTotalLabel _ LabelMorph contents: ''.
	self updateCartTotal.
		
	^cartTotalLabel.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:56:02' prior: 50912708!
updateCartTotal

	cartTotalLabel contents: 'Total $ ', self model cartTotal asString.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:56:28' prior: 50911380!
cartTotal
	^Date today! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:56:46' prior: 50912729!
cartTotal
	^DateAndTime now! !


w _ CatalogWindow forCartId: 3.
!

!classDefinition: #CatalogWindowModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 18:57:59'!
Object subclass: #CatalogWindowModel
	instanceVariableNames: 'cartId selectedCatalogEntryIndex catalogEntries cartEntries selectedCartEntryIndex cartTotal'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:57:58' prior: 50912735!
cartTotal
	^cartTotal! !
!CatalogWindowModel methodsFor: 'initialization' stamp: 'nz 7/7/2021 18:58:10' prior: 50911971!
initializeForCartId: aCartId 

	cartId _ aCartId.
	selectedCatalogEntryIndex _ 0.
	selectedCartEntryIndex _ 0.
	cartTotal _ 0.
	
	catalogEntries _ OrderedCollection new.
		
		
	cartEntries _ OrderedCollection new.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 18:58:41' prior: 50911959!
refreshCart
	
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
		
	cartTotal _ self recalculateCartTotal.
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:00:09'!
calculateCartTotal
	
	^cartEntries collect: [ :entry | self priceForIsbn: entry isbn ].! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:00:16' prior: 50912765!
refreshCart
	
	cartEntries _ OrderedCollection
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
		
	cartTotal _ self calculateCartTotal.
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:01:50' prior: 50912777!
calculateCartTotal
	
	^cartEntries sum: [ :entry | self priceForIsbn: entry isbn ] ifEmpty: [ 0 ].! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:05:25'!
priceForIsbn: anIsbn

	catalogEntries
		detect: [ :entry | entry isbn = anIsbn ] 
		ifFound: [ :entry | ^entry price ] 
		ifNone: [ self error: self class noPriceForIsbnErrorDescription ].! !
!CatalogWindowModel class methodsFor: 'instance creation' stamp: 'nz 7/7/2021 19:06:02'!
noPriceForIsbnErrorDescription
	^'No hay precio para el isbn en cuestion. Parece ser de un libro que no esta en el catalogo.'! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:08:58'!
checkoutCart
	self shouldBeImplemented.! !

!classDefinition: #TicketModel category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 19:11:12'!
Object subclass: #TicketModel
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:11:02' prior: 50912819!
checkoutCart
	
	"Pegarle a la API"
	| ticket |
	ticket _ TicketModel new.
	self triggerEvent: #checkoutSuccessful with: ticket.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:12:07' prior: 50912595!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #cartEntryRemoved send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	self model when: #checkoutSuccessful send: #navigateToTicketWindow to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:12:18' prior: 50912839!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #cartEntryRemoved send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	self model when: #checkoutSuccessful send: #navigateToTicketWindow: to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 19:13:12'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph cartSummarySlot cartTotalLabel'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:13:12' prior: 50912498!
rebuildRemoveCartEntryButton

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:13:12' prior: 50912477!
buildRemoveCartEntryButton

	cartSummarySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildRemoveCartEntryButton .
	
	^cartSummarySlot 
	! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:13:36'!
rebuildCartSummary

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:13:36' prior: 50912981!
buildRemoveCartEntryButton

	cartSummarySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildCartSummary .
	
	^cartSummarySlot 
	! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:13:36' prior: 50912895!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #cartEntryRemoved send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildCartSummary to: self.
	self model when: #checkoutSuccessful send: #navigateToTicketWindow: to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildRemoveCartEntryButton stamp: 'nz 7/7/2021 19:13:36'!
rebuildRemoveCartEntryButton

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:14:14' prior: 50912990!
rebuildCartSummary

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].
! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:15:14' prior: 50913088!
rebuildCartSummary

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].

! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:15:31'!
rebuildRemoveCartEntryButton

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].

! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:15:31' prior: 50913007!
buildRemoveCartEntryButton

	cartSummarySlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildRemoveCartEntryButton .
	
	^cartSummarySlot 
	! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:15:31' prior: 50913016!
initializeForCartId: aCartId 
	
	self titleMorph showButtonsNamed: #( close collapse ).
	self setLabel: 'Alto catalogo de libros de Kent Beck'.
	self model: (CatalogWindowModel forCartId: aCartId).
	self morphExtent: (self defaultExtent).

	"
	Aca usar dos PluggableListMorph para listar los libros del catalogo y los items del carrito
	Podemos asumir que arrancan vacios en el modelo y mandarle un #requestCatalog al modelo
	para que este eventualmente mande el request y tire un evento diciendo #catalogUpdated y
	actualizar en base a eso esta vista.
	
	Luego con cada click sobre un elemento de la lista del catalogo hay que actualizar algun
	label donde este el detalle con el precio al lado del boton de añadir al carrito y el textbox con la cantidad.
	
	Una facil para añadir al carrito es que le pege a la api para añadir el libro y luego por vagancia le pega
	tambien al listCart/. Luego en la respuesta del lisCart llega un evento a la vista #cartListUpdated
	o simil para actualizarla. 
	
	Con el boton de remover hay que hacerle algo similar y ya. 
	
	"
	self buildWindowBody.
	
	self model when: #catalogUpdated send: #updateCatalogTitleList to: self.
	self model when: #cartUpdated send: #updateCartList to: self.
	self model when: #cartEntryAdded send: #refreshCart to: self model.
	self model when: #cartEntryRemoved send: #refreshCart to: self model.
	self model when: #selectedCatalogEntryChanged send: #rebuildSelectedCatalogEntryInfo to: self.
	self model when: #selectedCartEntryChanged send: #rebuildRemoveCartEntryButton to: self.
	self model when: #checkoutSuccessful send: #navigateToTicketWindow: to: self.
	
	self model refreshCatalog.
	
	self openInWorld.! !

!methodRemoval: CatalogWindow #rebuildCartSummary stamp: 'nz 7/7/2021 19:15:31'!
rebuildCartSummary

	cartSummarySlot removeAllMorphs .
	
	self model selectedCartEntry ifNil: [
		cartSummarySlot addMorph: (
			LabelMorph contents: 'Seleccione un item del carrito para removerlo.'
		).
	] ifNotNil: [
		cartSummarySlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #removeSelectedCartEntry
				label: 'Remover ', self model selectedCartEntry title
		).
	].

!


w _ CatalogWindow forCartId: 3.
!

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 19:18:09'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph cartSummarySlot cartTotalLabel checkoutButton'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:18:07' prior: 50910935!
buildCheckoutButton

	checkoutButton _ PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.
		
	^checkoutButton.! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:18:20' prior: 50913231!
buildCheckoutButton

	checkoutButton _ PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.
		
	^checkoutButton.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:19:26' prior: 50913239!
buildCheckoutButton

	checkoutButton _ PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.
		
		
	^checkoutButton.! !

!classDefinition: #CatalogWindow category: 'Tus-Libros-Web-Client' stamp: 'nz 7/7/2021 19:20:06'!
Panel subclass: #CatalogWindow
	instanceVariableNames: 'selectedCatalogEntryInfoLayout catalogTitleListMorph cartListMorph cartSummarySlot cartTotalLabel checkoutButtonSlot'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Tus-Libros-Web-Client'!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:20:06' prior: 50913249!
buildCheckoutButton

	checkoutButtonSlot _ PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.
		
		
	^checkoutButtonSlot.! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:21:00'!
rebuildCheckoutButton

	checkoutButtonSlot removeAllMorphs .
	checkoutButtonSlot addMorph: (
		PluggableButtonMorph
			model: self model
			stateGetter: nil
			action: #checkoutCart
			label: 'Checkout'
	).
		! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:23:04' prior: 50913277!
rebuildCheckoutButton

	checkoutButtonSlot removeAllMorphs .
	
	self model cartTotal isZero ifTrue: [
		checkoutButtonSlot addMorph: (
			LabelMorph contents: 'Carrito vacío :('
		).
	] ifFalse: [
		checkoutButtonSlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Checkout'
		).
	].
		! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:23:23' prior: 50913269!
buildCheckoutButton

	checkoutButtonSlot _ PluggableButtonMorph
		model: self model
		stateGetter: nil
		action: #checkoutCart
		label: 'Checkout'.
		
	self rebuildCheckoutButton.
		
	^checkoutButtonSlot.! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:23:48' prior: 50913301!
buildCheckoutButton

	checkoutButtonSlot _ LayoutMorph newRow
		separation: 25;
		axisEdgeWeight: 0.5.
		
	self rebuildCheckoutButton.
		
	^checkoutButtonSlot.! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:26:23' prior: 50913287!
rebuildCheckoutButton

	checkoutButtonSlot removeAllMorphs .
	
	(self model cartTotal > 0) ifTrue: [
		checkoutButtonSlot addMorph: (
			LabelMorph contents: 'Carrito vacío :('
		).
	] ifFalse: [
		checkoutButtonSlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Checkout'
		).
	].
		! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:27:09' prior: 50912701!
updateCartList
	
	"Hay que avisarle a mano a la lista que cambió"
	cartListMorph updateList.
	self updateCartTotal.
	self rebuildCheckoutButton.! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:27:38' prior: 50912783!
refreshCart
	
	cartEntries _ OrderedCollection new.
	"	with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
		"
	cartTotal _ self calculateCartTotal.
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !
!CatalogWindowModel methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:27:59' prior: 50913350!
refreshCart
	
	cartEntries _ OrderedCollection 
		with: (CartEntry quantity: 4 title: 'Refactoring' isbn: '0001')
		with: (CartEntry quantity: 9 title: 'TDD by example' isbn: '0002').
		
	cartTotal _ self calculateCartTotal.
	
	self 
		triggerEvent: #cartUpdated
		with: self.! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:28:47' prior: 50913324!
rebuildCheckoutButton

	checkoutButtonSlot removeAllMorphs .
	
	(self model cartTotal > 0) ifTrue: [
		checkoutButtonSlot addMorph: (
			PluggableButtonMorph
				model: self model
				stateGetter: nil
				action: #checkoutCart
				label: 'Checkout'
		).
	] ifFalse: [
		checkoutButtonSlot addMorph: (
			LabelMorph contents: 'Agregá algo al carrito!!'
		).
	].
		! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 19:29:12' prior: 50912267 overrides: 50865461!
defaultExtent
	^1350@600! !


w _ CatalogWindow forCartId: 3.
!


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:30:22'!
navigateToTicketWindow: aTicketModel 
	self shouldBeImplemented.! !
!CatalogWindow methodsFor: 'as yet unclassified' stamp: 'nz 7/7/2021 19:30:30' prior: 50913398!
navigateToTicketWindow: aTicketModel 
	self shouldBeImplemented.! !


CreateCartWindow new.
!


CreateCartWindow new.!
!CatalogWindow methodsFor: 'initialization' stamp: 'nz 7/7/2021 19:34:05' prior: 50911424!
buildWindowBody

	^ self layoutMorph
		beRow;
		separation: 15;
		borderWidth: 1;
		color: Color red;
		axisEdgeWeight: 0;
		addMorph: self buildCatalogHalf;
		addMorph: self buildCartHalf.
		! !
!CatalogWindow methodsFor: 'catalog half' stamp: 'nz 7/7/2021 19:34:14' prior: 50910551!
buildCatalogHalf
	
	^ LayoutMorph newRow
		separation: 25;
		borderWidth: 1;
		axisEdgeWeight: 0.5;
		addMorph: self buildCatalogTitleList;
		addMorph: self buildSelectedCatalogEntryInfo;
		yourself.
		! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:34:18' prior: 50912139!
buildCartHalf
	
	^ LayoutMorph newColumn
		separation: 25;
		axisEdgeWeight: 0.5;
		borderWidth: 1;
		addMorph: self buildCartList;
		addMorph: self buildRemoveCartEntryButton;
		addMorph: self buildCartSummary;
		yourself.
		! !


w _ CatalogWindow forCartId: 3.
!
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:34:29' prior: 50912122!
buildCartList
	
	^ LayoutMorph newColumn
		separation: 25;
		borderWidth: 1;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'En el carrito:'
		);
		addMorph: [
			cartListMorph _ PluggableListMorph
				model: self model
				listGetter: #cartEntriesTitles
				indexGetter: #selectedCartEntryIndex
				indexSetter: #selectedCartEntryIndex:.
			cartListMorph
		] value;
		yourself.! !
!CatalogWindow methodsFor: 'cart half' stamp: 'nz 7/7/2021 19:34:36' prior: 50910906!
buildCartSummary
	
	^ LayoutMorph newRow
		separation: 25;
		borderWidth: 1;
		axisEdgeWeight: 0.5;
		addMorph: self buildCartTotal;
		addMorph: self buildCheckoutButton;
		yourself.
		! !
!CatalogWindow methodsFor: 'catalog half' stamp: 'nz 7/7/2021 19:34:40' prior: 50911657!
buildCatalogTitleList

	^ LayoutMorph newColumn
		separation: 25;
		borderWidth: 1;
		axisEdgeWeight: 0.5;
		addMorph: (
			LabelMorph
				contents: 'Libros disponibles:'
		);
		addMorph: [
			catalogTitleListMorph _ PluggableListMorph
				model: self model
				listGetter: #catalogEntriesTitles 
				indexGetter: #selectedCatalogEntryIndex
				indexSetter: #selectedCatalogEntryIndex:.
			catalogTitleListMorph
		] value;
		yourself.! !
!CatalogWindow methodsFor: 'catalog half' stamp: 'nz 7/7/2021 19:34:46' prior: 50910662!
buildSelectedCatalogEntryInfo
	
	selectedCatalogEntryInfoLayout _ LayoutMorph newColumn
		separation: 25;
		borderWidth: 1;
		axisEdgeWeight: 0.5;
		yourself.
		
	self rebuildSelectedCatalogEntryInfo.
		
	^selectedCatalogEntryInfoLayout.! !


w _ CatalogWindow forCartId: 3.
!

----QUIT----(7 July 2021 19:35:32) CuisUniversity-4532.image priorSource: 18561043!